{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\project\\\\ecommerce-spring-reactjs-master\\\\frontend\\\\src\\\\pages\\\\Product\\\\Product.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { Route, useHistory } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCartPlus, faPaperPlane, faStar } from \"@fortawesome/free-solid-svg-icons\";\nimport SockJS from \"sockjs-client\";\nimport { Stomp } from '@stomp/stompjs';\nimport StarRatingComponent from 'react-star-rating-component';\nimport { WEBSOCKET_URL } from \"../../utils/constants/url\";\nimport { fetchPerfumeByQuery, fetchPerfumeReviewsWS } from \"../../redux/thunks/perfume-thunks\";\nimport { addReviewToPerfume, resetForm } from \"../../redux/thunks/user-thunks\";\nimport halfStar from \"../../img/star-half.svg\";\nimport Spinner from \"../../component/Spinner/Spinner\";\nimport ProductReview from \"./ProductReview\";\nimport ScrollButton from \"../../component/ScrollButton/ScrollButton\";\nlet stompClient = null;\n\nconst Product = ({\n  match\n}) => {\n  var _perfume$reviews;\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const perfume = useSelector(state => state.perfume.perfume);\n  const reviews = useSelector(state => state.perfume.reviews);\n  const errors = useSelector(state => state.user.reviewErrors);\n  const isReviewAdded = useSelector(state => state.user.isReviewAdded);\n  const loading = useSelector(state => state.perfume.isPerfumeLoading);\n  const [author, setAuthor] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [rating, setRating] = useState(0);\n  const {\n    authorError,\n    messageError,\n    ratingError\n  } = errors;\n  useEffect(() => {\n    // GraphQL example\n    dispatch(fetchPerfumeByQuery(match.params.id)); // dispatch(fetchPerfume(match.params.id));\n\n    dispatch(resetForm());\n    window.scrollTo(0, 0);\n    const socket = new SockJS(WEBSOCKET_URL);\n    stompClient = Stomp.over(socket);\n    stompClient.connect({}, () => {\n      var _stompClient;\n\n      (_stompClient = stompClient) === null || _stompClient === void 0 ? void 0 : _stompClient.subscribe(\"/topic/reviews/\" + match.params.id, response => {\n        dispatch(fetchPerfumeReviewsWS(JSON.parse(response.body)));\n      });\n    });\n    return () => {\n      var _stompClient2;\n\n      return (_stompClient2 = stompClient) === null || _stompClient2 === void 0 ? void 0 : _stompClient2.disconnect();\n    };\n  }, []);\n  useEffect(() => {\n    setAuthor(\"\");\n    setMessage(\"\");\n    setRating(0);\n  }, [isReviewAdded]);\n\n  const addToCart = () => {\n    const perfumeId = perfume.id;\n    let data = localStorage.getItem(\"perfumes\");\n    let cart = data ? new Map(JSON.parse(data)) : new Map();\n\n    if (cart.has(perfumeId)) {\n      cart.set(perfumeId, cart.get(perfumeId) + 1);\n    } else {\n      cart.set(perfumeId, 1);\n    }\n\n    localStorage.setItem(\"perfumes\", JSON.stringify(Array.from(cart.entries())));\n    history.push(\"/cart\");\n  };\n\n  const addReview = event => {\n    event.preventDefault();\n    const review = {\n      perfumeId: match.params.id,\n      author,\n      message,\n      rating\n    };\n    dispatch(addReviewToPerfume(review));\n  };\n\n  const renderStars = (perfumeRating = 5) => {\n    return /*#__PURE__*/React.createElement(StarRatingComponent, {\n      renderStarIconHalf: () => /*#__PURE__*/React.createElement(\"img\", {\n        src: halfStar,\n        alt: \"halfStar\",\n        style: {\n          width: \"14.5px\",\n          marginBottom: \"2px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 43\n        }\n      }),\n      renderStarIcon: () => /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n        className: \"fa-sm\",\n        icon: faStar,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 39\n        }\n      }),\n      name: \"star\",\n      starCount: 5,\n      editing: false,\n      value: perfumeRating,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-5 pb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 24\n    }\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ScrollButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: perfume.filename,\n    className: \"rounded mx-auto w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }, perfume.perfumeTitle), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, perfume.perfumer), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, \"Product code: \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 42\n    }\n  }, perfume.id)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 29\n    }\n  }, renderStars(perfume.perfumeRating === 0 ? 5 : perfume.perfumeRating)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-10\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      paddingBottom: \"50px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 33\n    }\n  }, (_perfume$reviews = perfume.reviews) === null || _perfume$reviews === void 0 ? void 0 : _perfume$reviews.length, \" reviews\"))), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"#54C0A1\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 25\n    }\n  }, \"In Stock\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row ml-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    className: \"mr-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 50\n    }\n  }, \"$\", perfume.price), \".00\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-success mx-3\",\n    onClick: addToCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"mr-2 fa-lg\",\n    icon: faCartPlus,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 33\n    }\n  }), \" ADD TO CART\")), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 33\n    }\n  }, \"Perfume title:\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 33\n    }\n  }, perfume.perfumeTitle)), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 33\n    }\n  }, \"Brand:\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 33\n    }\n  }, perfume.perfumer)), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 33\n    }\n  }, \"Perfume type:\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 33\n    }\n  }, perfume.type)), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 33\n    }\n  }, \"Release year:\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 33\n    }\n  }, perfume.year)), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 33\n    }\n  }, \"Volume:\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 37\n    }\n  }, perfume.volume), \" ml.\")), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 33\n    }\n  }, \"Manufacturer country:\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 33\n    }\n  }, perfume.country)), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 33\n    }\n  }, \"Gender:\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 33\n    }\n  }, perfume.perfumeGender)), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 33\n    }\n  }, \"Top notes:\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 33\n    }\n  }, perfume.fragranceTopNotes)), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 33\n    }\n  }, \"Heart notes:\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 33\n    }\n  }, perfume.fragranceMiddleNotes)), /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 33\n    }\n  }, \"Base notes:\"), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 33\n    }\n  }, perfume.fragranceBaseNotes)))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"text-center mb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  }, \"REVIEWS\"), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    component: () => /*#__PURE__*/React.createElement(ProductReview, {\n      data: reviews,\n      itemsPerPage: 5,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 51\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: addReview,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group border mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mx-3 my-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 48\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 78\n    }\n  }, \"*\")), \" Your name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: authorError ? \"form-control is-invalid\" : \"form-control\",\n    name: \"author\",\n    value: author,\n    onChange: event => setAuthor(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 41\n    }\n  }, authorError), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 48\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 78\n    }\n  }, \"*\")), \" Message text\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 48\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 78\n    }\n  }, \"*\")), \" Your mark\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(StarRatingComponent, {\n    name: \"star\",\n    starCount: 5,\n    value: rating,\n    onStarClick: value => setRating(value),\n    renderStarIcon: () => /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"fa-sm\",\n      icon: faStar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 71\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback d-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 45\n    }\n  }, ratingError)))), /*#__PURE__*/React.createElement(\"textarea\", {\n    rows: 4,\n    className: messageError ? \"form-control is-invalid\" : \"form-control\",\n    name: \"message\",\n    value: message,\n    style: {\n      resize: \"none\"\n    },\n    onChange: event => setMessage(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 33\n    }\n  }, messageError), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-dark mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"mr-2\",\n    icon: faPaperPlane,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 37\n    }\n  }), \"Post a review\")))))));\n};\n\nexport default Product;","map":{"version":3,"sources":["C:/Users/HP/Desktop/project/ecommerce-spring-reactjs-master/frontend/src/pages/Product/Product.tsx"],"names":["React","useEffect","useState","Route","useHistory","useDispatch","useSelector","FontAwesomeIcon","faCartPlus","faPaperPlane","faStar","SockJS","Stomp","StarRatingComponent","WEBSOCKET_URL","fetchPerfumeByQuery","fetchPerfumeReviewsWS","addReviewToPerfume","resetForm","Spinner","ProductReview","ScrollButton","stompClient","Product","match","dispatch","history","perfume","state","reviews","errors","user","reviewErrors","isReviewAdded","loading","isPerfumeLoading","author","setAuthor","message","setMessage","rating","setRating","authorError","messageError","ratingError","params","id","window","scrollTo","socket","over","connect","subscribe","response","JSON","parse","body","disconnect","addToCart","perfumeId","data","localStorage","getItem","cart","Map","has","set","get","setItem","stringify","Array","from","entries","push","addReview","event","preventDefault","review","renderStars","perfumeRating","halfStar","width","marginBottom","filename","perfumeTitle","perfumer","paddingBottom","length","color","price","type","year","volume","country","perfumeGender","fragranceTopNotes","fragranceMiddleNotes","fragranceBaseNotes","target","value","resize"],"mappings":"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","sourcesContent":["import React, {FC, FormEvent, useEffect, useState} from 'react';\nimport {Route, RouteComponentProps, useHistory} from \"react-router-dom\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faCartPlus, faPaperPlane, faStar} from \"@fortawesome/free-solid-svg-icons\";\nimport SockJS from \"sockjs-client\";\nimport {CompatClient, Stomp} from '@stomp/stompjs';\nimport StarRatingComponent from 'react-star-rating-component';\n\nimport {WEBSOCKET_URL} from \"../../utils/constants/url\";\nimport {fetchPerfumeByQuery, fetchPerfumeReviewsWS} from \"../../redux/thunks/perfume-thunks\";\nimport {addReviewToPerfume, resetForm} from \"../../redux/thunks/user-thunks\";\nimport {AppStateType} from \"../../redux/reducers/root-reducer\";\nimport {Perfume, Review, ReviewData, ReviewError} from \"../../types/types\";\nimport halfStar from \"../../img/star-half.svg\";\nimport Spinner from \"../../component/Spinner/Spinner\";\nimport ProductReview from \"./ProductReview\";\nimport ScrollButton from \"../../component/ScrollButton/ScrollButton\";\n\nlet stompClient: CompatClient | null = null;\n\nconst Product: FC<RouteComponentProps<{ id: string }>> = ({match}) => {\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const perfume: Partial<Perfume> = useSelector((state: AppStateType) => state.perfume.perfume);\n    const reviews: Array<Review> = useSelector((state: AppStateType) => state.perfume.reviews);\n    const errors: Partial<ReviewError> = useSelector((state: AppStateType) => state.user.reviewErrors);\n    const isReviewAdded: boolean = useSelector((state: AppStateType) => state.user.isReviewAdded);\n    const loading: boolean = useSelector((state: AppStateType) => state.perfume.isPerfumeLoading);\n\n    const [author, setAuthor] = useState<string>(\"\");\n    const [message, setMessage] = useState<string>(\"\");\n    const [rating, setRating] = useState<number>(0);\n    const {authorError, messageError, ratingError} = errors;\n\n    useEffect(() => {\n        // GraphQL example\n        dispatch(fetchPerfumeByQuery(match.params.id));\n        // dispatch(fetchPerfume(match.params.id));\n        dispatch(resetForm());\n        window.scrollTo(0, 0);\n        const socket = new SockJS(WEBSOCKET_URL);\n        stompClient = Stomp.over(socket);\n        stompClient.connect({}, () => {\n            stompClient?.subscribe(\"/topic/reviews/\" + match.params.id, (response: any) => {\n                dispatch(fetchPerfumeReviewsWS(JSON.parse(response.body)));\n            });\n        });\n        return () => stompClient?.disconnect();\n    }, []);\n\n    useEffect(() => {\n        setAuthor(\"\");\n        setMessage(\"\");\n        setRating(0);\n    }, [isReviewAdded]);\n\n    const addToCart = (): void => {\n        const perfumeId: number | undefined = perfume.id;\n        let data: string | null = localStorage.getItem(\"perfumes\");\n        let cart: Map<number, any> = data ? new Map(JSON.parse(data as string)) : new Map();\n\n        if (cart.has(perfumeId as number)) {\n            cart.set(perfumeId as number, cart.get(perfumeId as number) + 1);\n        } else {\n            cart.set(perfumeId as number, 1);\n        }\n        localStorage.setItem(\"perfumes\", JSON.stringify(Array.from(cart.entries())));\n        history.push(\"/cart\");\n    };\n\n    const addReview = (event: FormEvent<HTMLFormElement>): void => {\n        event.preventDefault();\n        const review: ReviewData = {perfumeId: match.params.id as string, author, message, rating}\n        dispatch(addReviewToPerfume(review));\n    };\n\n    const renderStars = (perfumeRating: number = 5): JSX.Element => {\n        return (\n            <StarRatingComponent\n                renderStarIconHalf={() => <img src={halfStar} alt=\"halfStar\"\n                                               style={{width: \"14.5px\", marginBottom: \"2px\"}}/>}\n                renderStarIcon={() => <FontAwesomeIcon className=\"fa-sm\" icon={faStar}/>}\n                name={\"star\"}\n                starCount={5}\n                editing={false}\n                value={perfumeRating}/>\n        );\n    };\n\n    return (\n        <div className=\"container mt-5 pb-5\">\n            {loading ? <Spinner/> : <>\n                <ScrollButton/>\n                <div className=\"row\">\n                    <div className=\"col-md-5\">\n                        <div>\n                            <img src={perfume.filename} className=\"rounded mx-auto w-100\"/>\n                        </div>\n                    </div>\n                    <div className=\"col-md-7\">\n                        <h2>{perfume.perfumeTitle}</h2>\n                        <h3>{perfume.perfumer}</h3>\n                        <p>Product code: <span>{perfume.id}</span></p>\n                        <div className=\"row\">\n                            <div className=\"col-md-2\">\n                                {renderStars(perfume.perfumeRating === 0 ? 5 : perfume.perfumeRating)}\n                            </div>\n                            <div className=\"col-md-10\">\n                                <span style={{paddingBottom: \"50px\"}}>{perfume.reviews?.length} reviews</span>\n                            </div>\n                        </div>\n                        <p style={{color: \"#54C0A1\"}}>In Stock</p>\n                        <div className=\"row ml-1\">\n                            <h6 className=\"mr-5\"><span>${perfume.price}</span>.00</h6>\n                            <button type=\"submit\"\n                                    className=\"btn btn-success mx-3\"\n                                    onClick={addToCart}>\n                                <FontAwesomeIcon className=\"mr-2 fa-lg\" icon={faCartPlus}/> ADD TO CART\n                            </button>\n                        </div>\n                        <br/>\n                        <table className=\"table\">\n                            <tbody>\n                            <tr>\n                                <td>Perfume title:</td>\n                                <td>{perfume.perfumeTitle}</td>\n                            </tr>\n                            <tr>\n                                <td>Brand:</td>\n                                <td>{perfume.perfumer}</td>\n                            </tr>\n                            <tr>\n                                <td>Perfume type:</td>\n                                <td>{perfume.type}</td>\n                            </tr>\n                            <tr>\n                                <td>Release year:</td>\n                                <td>{perfume.year}</td>\n                            </tr>\n                            <tr>\n                                <td>Volume:</td>\n                                <td><span>{perfume.volume}</span> ml.</td>\n                            </tr>\n                            <tr>\n                                <td>Manufacturer country:</td>\n                                <td>{perfume.country}</td>\n                            </tr>\n                            <tr>\n                                <td>Gender:</td>\n                                <td>{perfume.perfumeGender}</td>\n                            </tr>\n                            <tr>\n                                <td>Top notes:</td>\n                                <td>{perfume.fragranceTopNotes}</td>\n                            </tr>\n                            <tr>\n                                <td>Heart notes:</td>\n                                <td>{perfume.fragranceMiddleNotes}</td>\n                            </tr>\n                            <tr>\n                                <td>Base notes:</td>\n                                <td>{perfume.fragranceBaseNotes}</td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n                <div className=\"mt-5\">\n                    <h3 className=\"text-center mb-5\">REVIEWS</h3>\n                    <Route exact component={() => <ProductReview data={reviews} itemsPerPage={5}/>}/>\n                    <form onSubmit={addReview}>\n                        <div className=\"form-group border mt-5\">\n                            <div className=\"mx-3 my-3\">\n                                <div className=\"row\">\n                                    <div className=\"col-md-4\">\n                                        <label><span className=\"text-danger\"><b>*</b></span> Your name</label>\n                                        <input\n                                            type=\"text\"\n                                            className={authorError ? \"form-control is-invalid\" : \"form-control\"}\n                                            name=\"author\"\n                                            value={author}\n                                            onChange={(event) => setAuthor(event.target.value)}/>\n                                        <div className=\"invalid-feedback\">{authorError}</div>\n                                        <label><span className=\"text-danger\"><b>*</b></span> Message text</label>\n                                    </div>\n                                    <div className=\"col-md-8\">\n                                        <label><span className=\"text-danger\"><b>*</b></span> Your mark</label>\n                                        <div>\n                                            <StarRatingComponent\n                                                name=\"star\"\n                                                starCount={5}\n                                                value={rating}\n                                                onStarClick={(value) => setRating(value)}\n                                                renderStarIcon={() => <FontAwesomeIcon className=\"fa-sm\"\n                                                                                       icon={faStar}/>}/>\n                                            <div className=\"invalid-feedback d-block\">{ratingError}</div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <textarea\n                                    rows={4}\n                                    className={messageError ? \"form-control is-invalid\" : \"form-control\"}\n                                    name=\"message\"\n                                    value={message}\n                                    style={{resize: \"none\"}}\n                                    onChange={(event) => setMessage(event.target.value)}/>\n                                <div className=\"invalid-feedback\">{messageError}</div>\n                                <button type=\"submit\" className=\"btn btn-dark mt-3\">\n                                    <FontAwesomeIcon className=\"mr-2\" icon={faPaperPlane}/>Post a review\n                                </button>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </>}\n        </div>\n    );\n};\n\nexport default Product;\n"]},"metadata":{},"sourceType":"module"}