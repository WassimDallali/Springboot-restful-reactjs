{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\project\\\\ecommerce-spring-reactjs-master\\\\frontend\\\\src\\\\pages\\\\Cart\\\\Cart.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { faChevronDown, faChevronUp, faMinusSquare, faShoppingBag, faShoppingCart } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport Spinner from \"../../component/Spinner/Spinner\";\nimport { calculateCartPrice, fetchCart, loadCart } from \"../../redux/thunks/cart-thunks\";\n\nconst Cart = () => {\n  const dispatch = useDispatch();\n  const perfumes = useSelector(state => state.cart.perfumes);\n  const totalPrice = useSelector(state => state.cart.totalPrice);\n  const loading = useSelector(state => state.cart.loading);\n  const [perfumeInCart, setPerfumeInCart] = useState(() => new Map());\n  useEffect(() => {\n    const perfumesFromLocalStorage = new Map(JSON.parse(localStorage.getItem(\"perfumes\")));\n\n    if (perfumesFromLocalStorage !== null) {\n      dispatch(fetchCart(Array.from(perfumesFromLocalStorage.keys())));\n      perfumesFromLocalStorage.forEach((value, key) => {\n        setPerfumeInCart(perfumeInCart.set(key, value));\n      });\n    } else {\n      dispatch(loadCart());\n    }\n  }, []);\n\n  const deleteFromCart = perfumeId => {\n    perfumeInCart.delete(perfumeId);\n\n    if (perfumeInCart.size === 0) {\n      localStorage.removeItem(\"perfumes\");\n      setPerfumeInCart(new Map());\n    } else {\n      localStorage.setItem(\"perfumes\", JSON.stringify(Array.from(perfumeInCart.entries())));\n    }\n\n    dispatch(fetchCart(Array.from(perfumeInCart.keys())));\n  };\n\n  const handleInputChange = (event, perfumeId) => {\n    if (isNaN(parseInt(event.target.value)) || parseInt(event.target.value) === 0 || parseInt(event.target.value) > 99) {\n      setPerfumeInCart(perfumeInCart.set(perfumeId, 1));\n      localStorage.setItem(\"perfumes\", JSON.stringify(Array.from(perfumeInCart.entries())));\n    } else {\n      setPerfumeInCart(perfumeInCart.set(perfumeId, parseInt(event.target.value)));\n      localStorage.setItem(\"perfumes\", JSON.stringify(Array.from(perfumeInCart.entries())));\n    }\n\n    dispatch(calculateCartPrice(perfumes));\n  };\n\n  const onIncrease = perfumeId => {\n    setPerfumeInCart(perfumeInCart.set(perfumeId, perfumeInCart.get(perfumeId) + 1));\n    localStorage.setItem(\"perfumes\", JSON.stringify(Array.from(perfumeInCart.entries())));\n    dispatch(calculateCartPrice(perfumes));\n  };\n\n  const onDecrease = perfumeId => {\n    setPerfumeInCart(perfumeInCart.set(perfumeId, perfumeInCart.get(perfumeId) - 1));\n    localStorage.setItem(\"perfumes\", JSON.stringify(Array.from(perfumeInCart.entries())));\n    dispatch(calculateCartPrice(perfumes));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-5 pb-5\",\n    style: {\n      minHeight: \"350px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 24\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, perfumes.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 29\n    }\n  }, \"Cart is empty\")) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"h4 mb-4 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"mr-2\",\n    icon: faShoppingCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 33\n    }\n  }), \" Cart\"), perfumes.map(perfume => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: perfume.id,\n      className: \"card mb-3 mx-auto\",\n      style: {\n        maxWidth: \"940px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row no-gutters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2 mx-3 my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: perfume.filename,\n      className: \"img-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 49\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 53\n      }\n    }, perfume.perfumer + \" \" + perfume.perfumeTitle), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 53\n      }\n    }, perfume.type), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"card-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 78\n      }\n    }, perfume.volume), \" ml.\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-1 mt-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-default\",\n      disabled: perfumeInCart.get(perfume.id) === 99,\n      onClick: () => onIncrease(perfume.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      size: \"lg\",\n      icon: faChevronUp,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 53\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control input-number\",\n      style: {\n        width: \"45px\"\n      },\n      value: perfumeInCart.get(perfume.id),\n      onChange: event => handleInputChange(event, perfume.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 49\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-default\",\n      disabled: perfumeInCart.get(perfume.id) === 1,\n      onClick: () => onDecrease(perfume.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      size: \"lg\",\n      icon: faChevronDown,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 53\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 57\n      }\n    }, \"$ \", perfume.price * perfumeInCart.get(perfume.id))), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-warning mb-2\",\n      onClick: () => deleteFromCart(perfume.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"mr-2\",\n      icon: faMinusSquare,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 57\n      }\n    }), \" Remove\")))));\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    className: \"my-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-9\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"h5 text-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 37\n    }\n  }, \"Total: $ \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 75\n    }\n  }, totalPrice))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/order\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"mr-2\",\n    icon: faShoppingBag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 49\n    }\n  }), \" Checkout\"))))))));\n};\n\nexport default Cart;","map":{"version":3,"sources":["C:/Users/HP/Desktop/project/ecommerce-spring-reactjs-master/frontend/src/pages/Cart/Cart.tsx"],"names":["React","useEffect","useState","Link","useDispatch","useSelector","faChevronDown","faChevronUp","faMinusSquare","faShoppingBag","faShoppingCart","FontAwesomeIcon","Spinner","calculateCartPrice","fetchCart","loadCart","Cart","dispatch","perfumes","state","cart","totalPrice","loading","perfumeInCart","setPerfumeInCart","Map","perfumesFromLocalStorage","JSON","parse","localStorage","getItem","Array","from","keys","forEach","value","key","set","deleteFromCart","perfumeId","delete","size","removeItem","setItem","stringify","entries","handleInputChange","event","isNaN","parseInt","target","onIncrease","get","onDecrease","minHeight","length","textAlign","map","perfume","id","maxWidth","filename","perfumer","perfumeTitle","type","volume","width","price"],"mappings":"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","sourcesContent":["import React, {ChangeEvent, FC, useEffect, useState} from 'react';\nimport {Link} from \"react-router-dom\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n    faChevronDown,\n    faChevronUp,\n    faMinusSquare,\n    faShoppingBag,\n    faShoppingCart\n} from \"@fortawesome/free-solid-svg-icons\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\n\nimport Spinner from \"../../component/Spinner/Spinner\";\nimport {calculateCartPrice, fetchCart, loadCart} from \"../../redux/thunks/cart-thunks\";\nimport {AppStateType} from \"../../redux/reducers/root-reducer\";\nimport {Perfume} from \"../../types/types\";\n\nconst Cart: FC = () => {\n    const dispatch = useDispatch();\n    const perfumes: Array<Perfume> = useSelector((state: AppStateType) => state.cart.perfumes);\n    const totalPrice: number = useSelector((state: AppStateType) => state.cart.totalPrice);\n    const loading: boolean = useSelector((state: AppStateType) => state.cart.loading);\n    const [perfumeInCart, setPerfumeInCart] = useState(() => new Map());\n\n    useEffect(() => {\n        const perfumesFromLocalStorage: Map<number, number> = new Map(JSON.parse(localStorage.getItem(\"perfumes\") as string));\n\n        if (perfumesFromLocalStorage !== null) {\n            dispatch(fetchCart(Array.from(perfumesFromLocalStorage.keys())))\n            perfumesFromLocalStorage.forEach((value: number, key: number) => {\n                setPerfumeInCart(perfumeInCart.set(key, value))\n            });\n        } else {\n            dispatch(loadCart());\n        }\n    }, []);\n\n    const deleteFromCart = (perfumeId: number): void => {\n        perfumeInCart.delete(perfumeId);\n\n        if (perfumeInCart.size === 0) {\n            localStorage.removeItem(\"perfumes\");\n            setPerfumeInCart(new Map());\n        } else {\n            localStorage.setItem(\"perfumes\", JSON.stringify(Array.from(perfumeInCart.entries())));\n        }\n        dispatch(fetchCart(Array.from(perfumeInCart.keys())));\n    };\n\n    const handleInputChange = (event: ChangeEvent<HTMLInputElement>, perfumeId: number): void => {\n        if (isNaN(parseInt(event.target.value)) || parseInt(event.target.value) === 0 || parseInt(event.target.value) > 99) {\n            setPerfumeInCart(perfumeInCart.set(perfumeId, 1));\n            localStorage.setItem(\"perfumes\", JSON.stringify(Array.from(perfumeInCart.entries())));\n        } else {\n            setPerfumeInCart(perfumeInCart.set(perfumeId, parseInt(event.target.value)));\n            localStorage.setItem(\"perfumes\", JSON.stringify(Array.from(perfumeInCart.entries())));\n        }\n        dispatch(calculateCartPrice(perfumes));\n    };\n\n    const onIncrease = (perfumeId: number): void => {\n        setPerfumeInCart(perfumeInCart.set(perfumeId, perfumeInCart.get(perfumeId) + 1));\n        localStorage.setItem(\"perfumes\", JSON.stringify(Array.from(perfumeInCart.entries())));\n        dispatch(calculateCartPrice(perfumes));\n    };\n\n    const onDecrease = (perfumeId: number): void => {\n        setPerfumeInCart(perfumeInCart.set(perfumeId, perfumeInCart.get(perfumeId) - 1));\n        localStorage.setItem(\"perfumes\", JSON.stringify(Array.from(perfumeInCart.entries())));\n        dispatch(calculateCartPrice(perfumes));\n    };\n\n    return (\n        <div className=\"container mt-5 pb-5\" style={{minHeight: \"350px\"}}>\n            {loading ? <Spinner/> :\n                <div>\n                    {perfumes.length === 0 ?\n                        <div style={{textAlign: \"center\"}}>\n                            <h2>Cart is empty</h2>\n                        </div> :\n                        <div>\n                            <p className=\"h4 mb-4 text-center\">\n                                <FontAwesomeIcon className=\"mr-2\" icon={faShoppingCart}/> Cart\n                            </p>\n                            {perfumes.map((perfume: Perfume) => {\n                                return (\n                                    <div key={perfume.id} className=\"card mb-3 mx-auto\" style={{maxWidth: \"940px\"}}>\n                                        <div className=\"row no-gutters\">\n                                            <div className=\"col-2 mx-3 my-3\">\n                                                <img src={perfume.filename} className=\"img-fluid\"/>\n                                            </div>\n                                            <div className=\"col-6\">\n                                                <div className=\"card-body\">\n                                                    <h4 className=\"card-title\">{perfume.perfumer + \" \" + perfume.perfumeTitle}</h4>\n                                                    <p className=\"card-text\">{perfume.type}</p>\n                                                    <p className=\"card-text\"><span>{perfume.volume}</span> ml.</p>\n                                                </div>\n                                            </div>\n                                            <div className=\"col-1 mt-3\">\n                                                <button className=\"btn btn-default\"\n                                                        disabled={perfumeInCart.get(perfume.id) === 99}\n                                                        onClick={() => onIncrease(perfume.id)}>\n                                                    <FontAwesomeIcon size=\"lg\" icon={faChevronUp}/>\n                                                </button>\n                                                <input type=\"text\"\n                                                       className=\"form-control input-number\"\n                                                       style={{width: \"45px\"}}\n                                                       value={perfumeInCart.get(perfume.id)}\n                                                       onChange={(event) => handleInputChange(event, perfume.id)}/>\n                                                <button className=\"btn btn-default\"\n                                                        disabled={perfumeInCart.get(perfume.id) === 1}\n                                                        onClick={() => onDecrease(perfume.id)}>\n                                                    <FontAwesomeIcon size=\"lg\" icon={faChevronDown}/>\n                                                </button>\n                                            </div>\n                                            <div className=\"col-2\">\n                                                <div className=\"card-body\">\n                                                    <h5 className=\"card-title\">\n                                                        <span>$ {perfume.price * perfumeInCart.get(perfume.id)}</span>\n                                                    </h5>\n                                                    <button className=\"btn btn-warning mb-2\"\n                                                            onClick={() => deleteFromCart(perfume.id)}>\n                                                        <FontAwesomeIcon className=\"mr-2\"\n                                                                         icon={faMinusSquare}/> Remove\n                                                    </button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                )\n                            })}\n                            <hr className=\"my-3\"/>\n                            <div className=\"row\">\n                                <div className=\"col-9\">\n                                    <p className=\"h5 text-right\">Total: $ <span>{totalPrice}</span></p>\n                                </div>\n                                <div className=\"col-3\">\n                                    <div className=\"form-row\">\n                                        <Link to={\"/order\"}>\n                                            <button className=\"btn btn-success\">\n                                                <FontAwesomeIcon className=\"mr-2\" icon={faShoppingBag}/> Checkout\n                                            </button>\n                                        </Link>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    }\n                </div>\n            }\n        </div>\n    );\n};\n\nexport default Cart;\n"]},"metadata":{},"sourceType":"module"}