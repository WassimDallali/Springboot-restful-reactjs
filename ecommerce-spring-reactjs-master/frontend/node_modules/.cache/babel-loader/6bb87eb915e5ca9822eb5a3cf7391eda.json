{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\project\\\\ecommerce-spring-reactjs-master\\\\frontend\\\\src\\\\pages\\\\Order\\\\Order.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCheckCircle, faShoppingBag } from \"@fortawesome/free-solid-svg-icons\";\nimport { addOrder, fetchOrder } from \"../../redux/thunks/order-thunks\";\nimport { validateEmail } from \"../../utils/input-validators\";\nimport PageLoader from \"../../component/PageLoader/PageLoader\";\nimport { useHistory } from \"react-router-dom\";\n\nconst Order = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const usersData = useSelector(state => state.user.user);\n  const perfumes = useSelector(state => state.cart.perfumes);\n  const totalPrice = useSelector(state => state.cart.totalPrice);\n  const errors = useSelector(state => state.order.errors);\n  const loading = useSelector(state => state.order.loading);\n  const perfumesFromLocalStorage = new Map(JSON.parse(localStorage.getItem(\"perfumes\")));\n  const [firstName, setFirstName] = useState(usersData.firstName);\n  const [lastName, setLastName] = useState(usersData.lastName);\n  const [city, setCity] = useState(usersData.city);\n  const [address, setAddress] = useState(usersData.address);\n  const [postIndex, setPostIndex] = useState(usersData.postIndex);\n  const [phoneNumber, setPhoneNumber] = useState(usersData.phoneNumber);\n  const [email, setEmail] = useState(usersData.email);\n  const [validateEmailError, setValidateEmailError] = useState(\"\");\n  const {\n    firstNameError,\n    lastNameError,\n    cityError,\n    addressError,\n    postIndexError,\n    phoneNumberError,\n    emailError\n  } = errors;\n  useEffect(() => {\n    dispatch(fetchOrder());\n  }, []);\n\n  const onFormSubmit = event => {\n    event.preventDefault();\n    const perfumesId = Object.fromEntries(new Map(JSON.parse(localStorage.getItem(\"perfumes\"))));\n    const validateEmailError = validateEmail(email);\n\n    if (validateEmailError) {\n      setValidateEmailError(validateEmailError);\n    } else {\n      setValidateEmailError(\"\");\n      const order = {\n        firstName,\n        lastName,\n        city,\n        address,\n        postIndex,\n        phoneNumber,\n        email,\n        perfumesId,\n        totalPrice\n      };\n      dispatch(addOrder(order, history));\n    }\n  };\n\n  let pageLoading;\n\n  if (loading) {\n    pageLoading = /*#__PURE__*/React.createElement(PageLoader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 24\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-5 pb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, pageLoading, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"mb-4 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"mr-2\",\n    icon: faShoppingBag,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }), \" Ordering\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onFormSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-sm-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 29\n    }\n  }, \"Name:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: firstNameError ? \"form-control is-invalid\" : \"form-control\",\n    name: \"firstName\",\n    value: firstName,\n    placeholder: \"Enter the first name\",\n    onChange: event => setFirstName(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 33\n    }\n  }, firstNameError))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-sm-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 29\n    }\n  }, \"Surname:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: lastNameError ? \"form-control is-invalid\" : \"form-control\",\n    name: \"lastName\",\n    value: lastName,\n    placeholder: \"Enter the last name\",\n    onChange: event => setLastName(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 33\n    }\n  }, lastNameError))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-sm-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 29\n    }\n  }, \"City:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: cityError ? \"form-control is-invalid\" : \"form-control\",\n    name: \"city\",\n    value: city,\n    placeholder: \"Enter the city\",\n    onChange: event => setCity(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 33\n    }\n  }, cityError))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-sm-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, \"Address:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: addressError ? \"form-control is-invalid\" : \"form-control\",\n    name: \"address\",\n    value: address,\n    placeholder: \"Enter the address\",\n    onChange: event => setAddress(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 33\n    }\n  }, addressError))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-sm-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 29\n    }\n  }, \"Index:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: postIndexError ? \"form-control is-invalid\" : \"form-control\",\n    name: \"postIndex\",\n    value: postIndex,\n    placeholder: \"Enter the index\",\n    onChange: event => setPostIndex(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 33\n    }\n  }, postIndexError))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-sm-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 29\n    }\n  }, \"Mobile:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: phoneNumberError ? \"form-control is-invalid\" : \"form-control\",\n    name: \"phoneNumber\",\n    value: phoneNumber,\n    placeholder: \"(___)-___-____\",\n    onChange: event => setPhoneNumber(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 33\n    }\n  }, phoneNumberError))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-sm-2 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: emailError || validateEmailError ? \"form-control is-invalid\" : \"form-control\",\n    name: \"email\",\n    value: email,\n    placeholder: \"example@gmail.com\",\n    onChange: event => setEmail(event.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"invalid-feedback\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 33\n    }\n  }, emailError || validateEmailError)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }, perfumes.map(perfume => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: perfume.id,\n      className: \"col-lg-6 d-flex align-items-stretch\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card mb-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: perfume.filename,\n      className: \"rounded mx-auto w-50\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 49\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 53\n      }\n    }, perfume.perfumeTitle), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 53\n      }\n    }, perfume.perfumer), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 57\n      }\n    }, \"Price: $ \", perfume.price), \".00\"), /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 53\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 57\n      }\n    }, \"Quantity: \", perfumesFromLocalStorage.get(perfume.id))))));\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary btn-lg btn-success px-5 float-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCheckCircle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 29\n    }\n  }), \" Validate order\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 29\n    }\n  }, \"To pay : $ \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 44\n    }\n  }, totalPrice), \".00\"))))));\n};\n\nexport default Order;","map":{"version":3,"sources":["C:/Users/HP/Desktop/project/ecommerce-spring-reactjs-master/frontend/src/pages/Order/Order.tsx"],"names":["React","useEffect","useState","useDispatch","useSelector","FontAwesomeIcon","faCheckCircle","faShoppingBag","addOrder","fetchOrder","validateEmail","PageLoader","useHistory","Order","dispatch","history","usersData","state","user","perfumes","cart","totalPrice","errors","order","loading","perfumesFromLocalStorage","Map","JSON","parse","localStorage","getItem","firstName","setFirstName","lastName","setLastName","city","setCity","address","setAddress","postIndex","setPostIndex","phoneNumber","setPhoneNumber","email","setEmail","validateEmailError","setValidateEmailError","firstNameError","lastNameError","cityError","addressError","postIndexError","phoneNumberError","emailError","onFormSubmit","event","preventDefault","perfumesId","Object","fromEntries","pageLoading","target","value","map","perfume","id","filename","perfumeTitle","perfumer","price","get"],"mappings":"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","sourcesContent":["import React, {FC, FormEvent, useEffect, useState} from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faCheckCircle, faShoppingBag} from \"@fortawesome/free-solid-svg-icons\";\n\nimport {addOrder, fetchOrder} from \"../../redux/thunks/order-thunks\";\nimport {validateEmail} from \"../../utils/input-validators\";\nimport PageLoader from \"../../component/PageLoader/PageLoader\";\nimport {AppStateType} from \"../../redux/reducers/root-reducer\";\nimport {useHistory} from \"react-router-dom\";\nimport {OrderError, Perfume, User} from \"../../types/types\";\n\nconst Order: FC = () => {\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const usersData: Partial<User> = useSelector((state: AppStateType) => state.user.user);\n    const perfumes: Array<Perfume> = useSelector((state: AppStateType) => state.cart.perfumes);\n    const totalPrice: number = useSelector((state: AppStateType) => state.cart.totalPrice);\n    const errors: Partial<OrderError> = useSelector((state: AppStateType) => state.order.errors);\n    const loading: boolean = useSelector((state: AppStateType) => state.order.loading);\n    const perfumesFromLocalStorage: Map<number, number> = new Map(JSON.parse(localStorage.getItem(\"perfumes\") as string));\n\n    const [firstName, setFirstName] = useState<string | undefined>(usersData.firstName);\n    const [lastName, setLastName] = useState<string | undefined>(usersData.lastName);\n    const [city, setCity] = useState<string | undefined>(usersData.city);\n    const [address, setAddress] = useState<string | undefined>(usersData.address);\n    const [postIndex, setPostIndex] = useState<string | undefined>(usersData.postIndex);\n    const [phoneNumber, setPhoneNumber] = useState<string | undefined>(usersData.phoneNumber);\n    const [email, setEmail] = useState<string | undefined>(usersData.email);\n    const [validateEmailError, setValidateEmailError] = useState<string>(\"\");\n\n    const {\n        firstNameError,\n        lastNameError,\n        cityError,\n        addressError,\n        postIndexError,\n        phoneNumberError,\n        emailError\n    } = errors;\n\n    useEffect(() => {\n        dispatch(fetchOrder());\n    }, []);\n\n    const onFormSubmit = (event: FormEvent<HTMLFormElement>): void => {\n        event.preventDefault();\n\n        const perfumesId = Object.fromEntries(new Map(JSON.parse(localStorage.getItem(\"perfumes\") as string)));\n        const validateEmailError: string = validateEmail(email);\n\n        if (validateEmailError) {\n            setValidateEmailError(validateEmailError);\n        } else {\n            setValidateEmailError(\"\");\n            const order = {firstName, lastName, city, address, postIndex, phoneNumber, email, perfumesId, totalPrice};\n            dispatch(addOrder(order, history));\n        }\n    };\n\n    let pageLoading;\n    if (loading) {\n        pageLoading = (<PageLoader/>);\n    }\n\n    return (\n        <div className=\"container mt-5 pb-5\">\n            {pageLoading}\n            <h4 className=\"mb-4 text-center\">\n                <FontAwesomeIcon className=\"mr-2\" icon={faShoppingBag}/> Ordering\n            </h4>\n            <br/>\n            <form onSubmit={onFormSubmit}>\n                <div className=\"row\">\n                    <div className=\"col-lg-6\">\n                        <div className=\"form-group row\">\n                            <label className=\"col-sm-2 col-form-label\">Name:</label>\n                            <div className=\"col-sm-8\">\n                                <input\n                                    type=\"text\"\n                                    className={firstNameError ? \"form-control is-invalid\" : \"form-control\"}\n                                    name=\"firstName\"\n                                    value={firstName}\n                                    placeholder=\"Enter the first name\"\n                                    onChange={(event) => setFirstName(event.target.value)}/>\n                                <div className=\"invalid-feedback\">{firstNameError}</div>\n                            </div>\n                        </div>\n                        <div className=\"form-group row\">\n                            <label className=\"col-sm-2 col-form-label\">Surname:</label>\n                            <div className=\"col-sm-8\">\n                                <input\n                                    type=\"text\"\n                                    className={lastNameError ? \"form-control is-invalid\" : \"form-control\"}\n                                    name=\"lastName\"\n                                    value={lastName}\n                                    placeholder=\"Enter the last name\"\n                                    onChange={(event) => setLastName(event.target.value)}/>\n                                <div className=\"invalid-feedback\">{lastNameError}</div>\n                            </div>\n                        </div>\n                        <div className=\"form-group row\">\n                            <label className=\"col-sm-2 col-form-label\">City:</label>\n                            <div className=\"col-sm-8\">\n                                <input\n                                    type=\"text\"\n                                    className={cityError ? \"form-control is-invalid\" : \"form-control\"}\n                                    name=\"city\"\n                                    value={city}\n                                    placeholder=\"Enter the city\"\n                                    onChange={(event) => setCity(event.target.value)}/>\n                                <div className=\"invalid-feedback\">{cityError}</div>\n                            </div>\n                        </div>\n                        <div className=\"form-group row\">\n                            <label className=\"col-sm-2 col-form-label\">Address:</label>\n                            <div className=\"col-sm-8\">\n                                <input\n                                    type=\"text\"\n                                    className={addressError ? \"form-control is-invalid\" : \"form-control\"}\n                                    name=\"address\"\n                                    value={address}\n                                    placeholder=\"Enter the address\"\n                                    onChange={(event) => setAddress(event.target.value)}/>\n                                <div className=\"invalid-feedback\">{addressError}</div>\n                            </div>\n                        </div>\n                        <div className=\"form-group row\">\n                            <label className=\"col-sm-2 col-form-label\">Index:</label>\n                            <div className=\"col-sm-8\">\n                                <input\n                                    type=\"text\"\n                                    className={postIndexError ? \"form-control is-invalid\" : \"form-control\"}\n                                    name=\"postIndex\"\n                                    value={postIndex}\n                                    placeholder=\"Enter the index\"\n                                    onChange={(event) => setPostIndex(event.target.value)}/>\n                                <div className=\"invalid-feedback\">{postIndexError}</div>\n                            </div>\n                        </div>\n                        <div className=\"form-group row\">\n                            <label className=\"col-sm-2 col-form-label\">Mobile:</label>\n                            <div className=\"col-sm-8\">\n                                <input\n                                    type=\"text\"\n                                    className={phoneNumberError ? \"form-control is-invalid\" : \"form-control\"}\n                                    name=\"phoneNumber\"\n                                    value={phoneNumber}\n                                    placeholder=\"(___)-___-____\"\n                                    onChange={(event) => setPhoneNumber(event.target.value)}/>\n                                <div className=\"invalid-feedback\">{phoneNumberError}</div>\n                            </div>\n                        </div>\n                        <div className=\"form-group row\">\n                            <label className=\"col-sm-2 col-form-label\">Email:</label>\n                            <div className=\"col-sm-8\">\n                                <input\n                                    type=\"text\"\n                                    className={emailError || validateEmailError ? \"form-control is-invalid\" : \"form-control\"}\n                                    name=\"email\"\n                                    value={email}\n                                    placeholder=\"example@gmail.com\"\n                                    onChange={(event) => setEmail(event.target.value)}/>\n                                <div className=\"invalid-feedback\">{emailError || validateEmailError}</div>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"col-lg-6\">\n                        <div className=\"container-fluid\">\n                            <div className=\"row\">\n                                {perfumes.map((perfume) => {\n                                    return (\n                                        <div key={perfume.id} className=\"col-lg-6 d-flex align-items-stretch\">\n                                            <div className=\"card mb-5\">\n                                                <img src={perfume.filename}\n                                                     className=\"rounded mx-auto w-50\"/>\n                                                <div className=\"card-body text-center\">\n                                                    <h5>{perfume.perfumeTitle}</h5>\n                                                    <h6>{perfume.perfumer}</h6>\n                                                    <h6><span>Price: $ {perfume.price}</span>.00</h6>\n                                                    <h6>\n                                                        <span>Quantity: {perfumesFromLocalStorage.get(perfume.id)}</span>\n                                                    </h6>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    )\n                                })}\n                            </div>\n                        </div>\n                        <button type=\"submit\" className=\"btn btn-primary btn-lg btn-success px-5 float-right\">\n                            <FontAwesomeIcon icon={faCheckCircle}/> Validate order\n                        </button>\n                        <div className=\"row\">\n                            <h4>To pay : $ <span>{totalPrice}</span>.00</h4>\n                        </div>\n                    </div>\n                </div>\n            </form>\n        </div>\n    );\n};\n\nexport default Order;\n"]},"metadata":{},"sourceType":"module"}